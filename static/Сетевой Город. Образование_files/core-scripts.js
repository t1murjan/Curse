var core=function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=5)}([function(e,t,n){"use strict";function o(){return!window.bIsDBFree}function r(){window.bIsDBFree=!1}function i(){window.bIsDBFree=!0}Object.defineProperty(t,"__esModule",{value:!0}),t.isDBBusy=o,t.setDBBusy=r,t.setDBFree=i,t.OnChangeSelect=t.ok=t.ok_check_db=t.goBack=t.DoSubmit=t.goHistoryBack=t.goCommonBack=t.haveToLogout=t.canSubmit=t.GetForm=t.checkForChanges=void 0;var a=function(e){return e&&e.__esModule?e:{default:e}}(n(1));window.isHaveToLogout=!0;var s=function(){return a.default.when(!window.dataWereChanged||$.show.getConfirmation(language.Generic.Common.kDataWereChanged))};t.checkForChanges=s;var u=function(e,t){return $(t).parents().is(".ui-dialog")?$(t).parents(".ui-dialog:last").find("form[name="+e+"]")[0]:$("form[name="+e+"]:first")[0]};t.GetForm=u;var l=function(){return!0};t.canSubmit=l;var c=function(){return window.isHaveToLogout};t.haveToLogout=c;var d=function(){return"function"==typeof Back?Back():f()};t.goCommonBack=d;var f=function(){return s().then(function(){return window.isHaveToLogout=!1,history.go(-1)})};t.goHistoryBack=f;var p=function(e,t){var n;t&&(e.action=t),window.isHaveToLogout=!1;return n=e.at||e.AT,n||(n=/\bat\=/i.test(e.action)),!n&&void 0!==window.strATTok&&window.strATTok.length&&function(e,t,n){var o=document.createElement("input");o.setAttribute("type","hidden"),o.setAttribute("name",t),o.setAttribute("value",n),e.appendChild(o)}(e,"at",window.strATTok),e.submit()};t.DoSubmit=p;var h=function(e,t){return s().then(function(){return $('input[type="password"]',e).attr("disabled","disabled"),p(e,t)})};t.goBack=h;var m=function(e,t){return a.default.when(window.bIsDBFree,window.canSubmit).then(function(){return $(document).trigger("showProcessing"),r(),p(document.forms[e],t)})};t.ok_check_db=m;var g=function(e,t,n){var o;return o=null===n?document.forms[e]:u(e,n),a.default.when(l).then(function(){return p(o,t)})};t.ok=g;var v=function(e,t){s().then(function(){return m(e,t)}).fail(function(){document.forms[e].reset()})};t.OnChangeSelect=v},function(e,t){var n;n=function(){var e;return e=function(e){for(var t;"function"==typeof e;)e=e();return Array.isArray(e)&&(e=n.when(e)),void 0===e||"boolean"==typeof e?(t=$.Deferred(),e?t.resolve():t.reject(),t.promise()):"undefined"!=typeof Promise&&e instanceof Promise?(t=$.Deferred(),e.then(function(){return t.resolve()},function(){return t.reject()}),t.promise()):e},{wrapPromise:function(e,t,n){return function(){return $.when(e()).then(t,n)}},wrapAlwaysPromise:function(e){return function(){var t,o;return t=$.Deferred(),o=function(){return t.resolve()},n.wrapPromise(e,o,o)(),t.promise()}},resolve:function(){var e;return e=$.Deferred(),e.resolve(),e.promise()},when:function(){var t,n,o,r,i,a;return n=$.Deferred(),t=arguments,1===arguments.length&&"object"==typeof arguments[0]&&(t=arguments[0]),0===t.length?(n.resolve(),n.promise()):(i=function(){n.reject()},a=function(){n.resolve()},r=function(n){var o,s;return o=t[n],s=function(){return e(o)},n<t.length-1?function(){return $.when(s()).then(r(n+1),i)}:n===t.length-1?function(){return $.when(s()).then(a,i)}:a},o=t[0],$.when(e(o)).then(r(1),i),n.promise())}}}(),e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.restoreFormPosition=t.saveFormPosition=t.postTo=void 0;var o=n(3),r=function(e,t,n,r){var i,a={path:"",method:"POST",params:void 0,formParams:void 0,auth:!0,nocache:!0};"string"==typeof e?(i=a,e&&(i.path=e),t&&(i.params=t),n&&(i.formParams=n),!1===r&&(i.auth=!1)):i=$.extend({},a,e);var s=function(e,t,n){var o=document.createElement("input");return o.setAttribute("type","hidden"),o.setAttribute("name",t),o.setAttribute("value",n),e.appendChild(o)},u=document.createElement("form");if(u.setAttribute("method",i.method),u.setAttribute("action",i.path),"undefined"!==i.formParams)for(var l in i.formParams)u.setAttribute(l,i.formParams[l]);var c="undefined"!=typeof appContext&&appContext.at||window.strATTok;i.auth=i.auth&&c,i.auth&&s(u,"at",c);var d=null;if(i.nocache&&(d=window.getVer().toString(),s(u,"VER",d)),i.formParams&&i.formParams.download){var f=null,p=function(){return window.clearInterval(f),$.cookie("fileDownloadToken",null),$(document).trigger("closeProcessing")},h=function(){if($.cookie("fileDownloadToken")===d)return p()};f=window.setInterval(h,1e3),$(document).trigger("showProcessing")}return o.instance.iterateParams(i.params,function(e,t){i.auth&&"AT"===e||s(u,e,t)}),document.body.appendChild(u),window.isHaveToLogout=!1,u.submit()};t.postTo=r;var i=function(e,t){var n=[];$.each($('[data-toggle="collapse"]'),function(e,t){var o=$(t),r=o.attr("data-target"),i=o.attr("aria-expanded");n[e]={id:r,isExpanded:i}});var o=$(window).scrollTop(),r={position:o,panels:n},i=new Date;i.setTime(i.getTime()+18e5);var a={expires:i};t&&(a=$.extend(a,{path:t})),$.cookie(e,JSON.stringify(r),a)};t.saveFormPosition=i;var a=function(e){return new Promise(function(t){if(!$.cookie(e))return void t();var n=JSON.parse($.cookie(e));n.panels.forEach(function(e){var t=$('[data-target="'.concat(e.id,'"]')).attr("aria-expanded");e.isExpanded!=t&&$(e.id).collapse("toggle")}),setTimeout(function(){t(),$("html, body").animate({scrollTop:n.position},200)},1e3),document.cookie="".concat(e,"=; expires=Thu, 01 Jan 1970 00:00:01 GMT;")})};t.restoreFormPosition=a},function(e,t,n){"use strict";function o(e){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=i(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,r=function(){};return{s:r,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw a}}}}function i(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function l(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}Object.defineProperty(t,"__esModule",{value:!0}),t.instance=t.UrlHelper=void 0;var c=function(){function e(t){s(this,e),this._url=t,this._params=""}return l(e,[{key:"url",value:function(){return this._url}},{key:"params",value:function(){return this._params}},{key:"addParam",value:function(e,t){0!==this._params.length&&(this._params+="&"),this._params+=encodeURIComponent(e)+"="+encodeURIComponent(t)}},{key:"getFullUrl",value:function(){return this._params.length>0?this._url.indexOf("?")>0?this._url+"&"+this._params:this._url+"?"+this._params:this._url}}]),e}(),d=function(){function e(){s(this,e)}return l(e,[{key:"iterateParams",value:function(e,t){if("string"!=typeof e){for(var n in e)if(e.hasOwnProperty(n)){var i=e[n];if(Array.isArray(i)){var a,s=r(i);try{for(s.s();!(a=s.n()).done;){var u=a.value;t(n,u)}}catch(e){s.e(e)}finally{s.f()}}else i&&"object"===o(i)&&void 0!==i.name?t(i.name,i.value):t(n,i)}}else{var l,c=e.split("&"),d=r(c);try{for(d.s();!(l=d.n()).done;){var f=l.value,p=f.split("=");t(p[0],p[1])}}catch(e){d.e(e)}finally{d.f()}}}},{key:"makeUrl",value:function(e,t,n){var o=new c(e);if(!n&&void 0!==window.strATTok){o.addParam("at",window.strATTok);var r=getVer();o.addParam("ver",r)}return this.iterateParams(t,function(e,t){return o.addParam(e,t)}),o.getFullUrl()}},{key:"getParameterByName",value:function(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)"),o=n.exec(t);if(!o)return null;if(!o[2])return"";var r=o[2].replace(/\+/g," ");return decodeURIComponent(r)}}]),e}();t.UrlHelper=d;var f=new d;t.instance=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.closeChildWindows=t.windowOpen=t.center=t.openTab=t.openPopupWindow=void 0,window.childWindows=[];var o=["_mail","_forum","_help","_qualityAssessmentAnalytics","_qualityAssessmentAnalyticsEM","nsxml","_staffAttest"],r=function(e){var t;return t=-1!=e.lastIndexOf("?")?"&":"?",t+="at="+appContext.at+"&ver="+getVer(),e+t},i=function(e,t,n,o){var i=window.windows[e];i&&!i.closed&&"_qualityAssessmentAnalytics"!=e&&"_qualityAssessmentAnalyticsEM"!=e&&"_staffAttest"!=e&&(i.forceClosing=!0,i.close());var a={url:r(t),name:e,specs:"status=yes,toolbar=no,menubar=no,location=no,scrollbars=yes,resizable=yes,directories=no,width="+n+",height="+o,winChild:i};if(i&&!i.closed&&("_qualityAssessmentAnalytics"==e||"_qualityAssessmentAnalyticsEM"==e))return void i.focus();u(a),i=window.windows[e]=a.winChild,s(i,n,o)};t.openPopupWindow=i;var a=function(e,t){var n=document.createElement("a");n.href=r(e),n.target=t||"_blank",document.body.appendChild(n),n.click(),n.remove()};t.openTab=a;var s=function(e,t,n){if(e&&e.screen&&!("undefined"!=typeof bowser&&bowser.webkit&&parseInt(bowser.version)<20)){var o=(e.screen.availWidth-t)/2,r=(e.screen.availHeight-n)/2;e.moveTo(o,r)}};t.center=s;var u=function(e){var t,n,r=e.url||"",i=e.name||"",a=e.specs||"",s=e.replace||"";for(n=e.winChild,n&&!n.closed&&n.close(),n=window.open(r,i,a,s),e.winChild=n,t=n.opener;t&&!t.closed;)try{t.childWindows.push(n),t=t.opener}catch(e){break}return $(window).on("unload",function(e){if(n&&!n.closed&&o.indexOf(n.name)<0)return n.forceClosing=!0,n.close()})};t.windowOpen=u;var l=function(){var e;for(e=window.childWindows.length;e>0;)window.childWindows[e-1]&&!window.childWindows.closed&&window.childWindows[e-1].close(),window.childWindows.pop(),e-=1};t.closeChildWindows=l},function(e,t,n){e.exports=n(6)},function(e,t,n){"use strict";function o(e){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return r=function(){return e},e}function i(e){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var t=r();if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.core=void 0,n(7);var s=a(n(8));n(10),n(11);var u=a(n(1));n(12);var l=a(n(13)),c=i(n(14)),d=i(n(15)),f=i(n(2)),p=i(n(0)),h=i(n(4)),m=i(n(16)),g=i(n(17)),v=a(n(18)),w=a(n(19));n(20),n(21),n(22),n(23);var b=function(e,t){for(var n in e)if(e.hasOwnProperty(n)){if("default"===n)continue;e.hasOwnProperty(n)&&(t[n]=e[n])}},y={deferredResLoader:s.default,extDeferred:u.default,resetScreen:l.default};t.core=y,b(d,y),b(c,y),b(g,y),b(f,y),b(p,y),b(h,y),b(m,y),b(v.default,y),y.shower=w.default,$(document).ready(function(){g.initButtonLock()}),b(y,window)},function(e,t,n){"use strict";void 0===document.documentElement.closest&&(Element.prototype.matches=Element.prototype.webkitMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.mozMatchesSelector||function(e){for(var t=this,n=(t.document||t.ownerDocument).querySelectorAll(e),o=0;n[o]&&n[o]!==t;)++o;return!!n[o]},Element.prototype.closest=function(e){for(var t=this;t;){if(t.matches(e))return t;t="SVGElement"in window&&t instanceof SVGElement?t.parentNode:t.parentElement}return null},function(){var e=[window.Element,window.CharacterData,window.DocumentType],t=[];e.forEach(function(e){e&&t.push(e.prototype)}),function(e){e.forEach(function(e){e.hasOwnProperty("remove")||Object.defineProperty(e,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode.removeChild(this)}})})}(t)}())},function(e,t,n){"use strict";function o(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=r(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,i=function(){};return{s:i,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw a}}}}function r(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(9),s=function(){var e=[],t=["/static/dist/common/css/ext-styles.min.css"],n=$.Deferred(),r=n.promise(),i=new a.ResourceLoader(window.getVersionedLink),s=0,u=function(t){if((s+=1)===e.length)return n.resolve()},l=function(e){return function(t){return e&&e(t),u()}},c=function(){var n,r="dev"===("undefined"!=typeof appContext&&null!==appContext?appContext.environment:void 0)?"/static/dist/common/js/ext-scripts.js":"/static/dist/common/js/ext-scripts.min.js";e.push({src:r});var a,s=o(t);try{for(s.s();!(a=s.n()).done;)n=a.value,i.loadStyleSheet(n)}catch(e){s.e(e)}finally{s.f()}var u,c=o(e);try{for(c.s();!(u=c.n()).done;){var d=u.value;d.handler=l(d.handler),i.loadScript(d.src,d.handler)}}catch(e){c.e(e)}finally{c.f()}};return window.addEventListener?window.addEventListener("load",c,!1):window.attachEvent?window.attachEvent("onload",c):window.onload=c,{loadScript:function(t,n){return e.push({src:t,handler:n})},loadStyle:function(e){return t.push(e)},loadJsScript:function(e,t){return i.loadScript(e,t)},ready:function(e){return r.then(e)},promise:function(){return r}}}(),u=s;t.default=u},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}Object.defineProperty(t,"__esModule",{value:!0}),t.ResourceLoader=t.getVersionedLink=void 0;var a=function(e){return"undefined"==typeof appContext?e:e+"?ver="+appContext.version};t.getVersionedLink=a;var s=function(){function e(t){o(this,e),this.head=document.getElementsByTagName("head")[0]||document.documentElement,this.getVersionedLink=t||a}return i(e,[{key:"loadStyleSheet",value:function(e){e=this.getVersionedLink(e),document.createStyleSheet?document.createStyleSheet(e):$(this.head).append($("<link rel='stylesheet' href='".concat(e,"' type='text/css' media='screen' />")))}},{key:"loadScript",value:function(e,t){var n=this,o=!1,r=function(r){var i=document.createElement("script"),a=n.getVersionedLink(e);i.src=a,i.async=!1;var s=function(){if(t&&t(e),n.head&&i.parentNode)return n.head.removeChild(i)};i.onload=function(){o||(o=!0,s(),r())},i.onreadystatechange=function(){var e=n;if("complete"===n.readyState||"loaded"===n.readyState)return setTimeout(function(){return e.onload()},0)},n.head.insertBefore(i,n.head.firstChild)};if("undefined"==typeof Promise){var i=$.Deferred();return r(function(){return i.resolve()}),i.promise()}return new Promise(r)}}]),e}();t.ResourceLoader=s},function(e,t){$(window).on("load",function(){var e,t;return e=$("#page-preloader"),t=e.find(".spinner"),t.fadeOut(),e.delay(350).fadeOut("slow")})},function(e,t){!function(e){var t,n;n=function(t){var n,o,r,i,a,s;if(o=e("span[class=text]",t),r=t.parent(".input-group"),r.length>0?(i=o.width(),n=r.find(".input-group-btn").width(),s=i+n,a=r.parent().width()):(a=t.width(),s=o.width()),a<=s)return t.attr("data-original-title",o.text()),t.popover({placement:"bottom",html:"true",trigger:"hover"})},e(document).ready(function(){return e("span.form-control-title, span.form-control").each(function(){return n(e(this))})}),t=function(t){e(t).on({keypress:function(e){if(e=e||window.event,String.fromCharCode(e.charCode),13===e.keyCode)return!1}})},e(document).ready(function(){return e("form").each(function(){var n;if(n=e(this).find('input[type="text"]'),1===n.length)return t(n)})}),e.uicontrols={select:function(t){var n,o,r,i,a,s;for(n=e("<select></select>").addClass("form-control").attr("id",t.id).attr("name",t.name),a=t.items,o=0,i=a.length;o<i;o++)r=a[o],e("<option></option>").val(r.value).append(null!=(s=r.title)?s.escapeHTML():void 0).appendTo(n);return n},button:function(t){var n,o;return o={type:"btn-default"},t=e.extend({},o,t),n=e("<button></button>").addClass("btn").addClass(t.type).attr("type","button"),t.size&&n.addClass(t.size),t.icon&&n.append(e("<span></span>").addClass("glyphicon glyphicon-"+t.icon)),t.id&&n.attr("id",t.id),t.label&&n.append(" "+t.label),t.name&&n.attr("name",t.name),t.title&&n.attr("title",t.title),"function"==typeof t.click?n.on("click",t.click):"string"==typeof t.click&&n.attr("onclick",t.click),n},linkButton:function(t){var n,o,r,i,a;for(n=e("<div></div>"),o=0,r=t.length;o<r;o++)a=t[o],i=e("<a></a>"),a.classButton&&i.addClass(a.classButton),a.title&&i.attr("title",a.title),t.id&&i.attr("id",t.id),a.icon&&i.append(e("<span></span>").addClass("glyphicon "+a.icon)),a.click&&i.attr("href",a.click),n.append(i);return n},title:function(t){var o;return o=e("<span></span>").addClass("form-control").addClass("form-control-title"),e("<span></span>").addClass("text").append(t).appendTo(o),setTimeout(function(){return n(o)},500),o},info:function(t){return e("<div></div>").addClass("alert").addClass("alert-info").attr("role","alert").html(t)}},jQuery.fn.ajaxSelect=function(){this.selectpicker({liveSearch:!0}).ajaxSelectPicker({ajax:{data:function(){return{query:e(".bs-searchbox input").val(),AT:strATTok}},type:"GET"},preprocessData:function(e){var t;return"undefined"!=typeof customHandler?void customHandler(e):(t=[],_.each(e.data.values,function(e){t.push({value:e.id,text:e.name,disable:!1})}),t)},preserveSelected:!1,requestDelay:1e3})},jQuery.fn.inputRules=function(){var t;return t={inputNum:function(t){var n,o;n={minVal:.01,maxVal:null,allowFractional:!0},o=e.extend(n,t),e(this,"input").on({keypress:function(e){var t,n;return e=e||window.event,t=String.fromCharCode(e.charCode),(8===(n=e.keyCode)||9===n||37===n||39===n||46===n)&&"."!==t||("1234567890".indexOf(t)>-1||!(!(o.allowFractional&&".,".indexOf(t)>-1)||/[.,]/.test(this.value)))}}).blur(function(){var t,n,r,i,a;return t=e(this),r=parseFloat(o.minVal),a=parseFloat(t.val().replace(",",".")),isNaN(a)||0===a?(t.val(""),t.change(),void(this.wasChanged()||(window.dataWereChanged=!1))):o.maxVal&&(n=parseFloat(o.maxVal),a>n)?(t.val(""),t.change(),window.dataWereChanged=!1,focusAlert(t,language.Generic.Common.kMaxInput+n)):a<r?(t.val(""),t.change(),window.dataWereChanged=!1,focusAlert(t,language.Generic.Common.kMinInput+r)):(i=a.toString().replace(".",","),t.val(i))})}},function(n){if(t[n])return t[n].apply(this,Array.prototype.slice.call(arguments,1));e.error("Метод с именем "+n+" не существует для jQuery.inputRules")}}()}(jQuery)},function(e,t){(function(){"undefined"!=typeof Handlebars&&(Handlebars.registerHelper("ifNull",function(e,t){return null===e?t.fn(this):t.inverse(this)}),Handlebars.registerHelper("ifNotNull",function(e,t){return null!==e?t.fn(this):t.inverse(this)}),Handlebars.registerHelper("currentDate",function(e){var t;return e=e.substring(0,19),t=new Date(e),dateUtils.date2str(t)+" "+dateUtils.time2Str_ss(t)}),Handlebars.registerHelper("date2str",function(e){return void 0===e||null==e?"":("string"==typeof e&&(e=new Date(e)),dateUtils.date2str(e))}),Handlebars.registerHelper("uCase",function(e){return strCheckIsNull(e).toUpperCase()}),Handlebars.registerHelper("lCase",function(e){return strCheckIsNull(e).toLowerCase()}),Handlebars.registerHelper("match",function(e){return e+1}),Handlebars.registerHelper("debug",function(e){if(console.log("Current Context"),console.log("===================="),console.log(this),e)return console.log("Value"),console.log("===================="),console.log(e)}),Handlebars.registerHelper("ifCond",function(e,t,n,o){switch(t){case"==":case"===":return e===n?o.fn(this):o.inverse(this);case"<":return e<n?o.fn(this):o.inverse(this);case"<=":return e<=n?o.fn(this):o.inverse(this);case">":return e>n?o.fn(this):o.inverse(this);case">=":return e>=n?o.fn(this):o.inverse(this);case"&&":return e&&n?o.fn(this):o.inverse(this);case"||":return e||n?o.fn(this):o.inverse(this);default:return o.inverse(this)}}),Handlebars.registerHelper("forLoop",function(e,t,n,o){var r,i,a,s,u;for(r="",i=a=e,s=t,u=n;u>0?a<=s:a>=s;i=a+=u)r+=o.fn(i);return r}))}).call(this)},function(e,t){var n;$(document).ready(function(){var e,t,n,o,r;for("function"==typeof CalculateOSH&&CalculateOSH(),o=document.forms,r=[],t=0,n=o.length;t<n;t++)e=o[t],r.push($(e).rememberState());return r}),function(e){e.fn.rememberState=function(){return e("input:not([type=hidden]), select, textarea, .text-data",this).each(function(t,n){var o;return o="radio"===n.type||"checkbox"===n.type?n.checked:e(n).hasClass("text-data")?e(n).text():e(n).val(),e(n).data("storedState",o),n.wasChanged=function(){return("radio"===this.type||"checkbox"===this.type?this.checked:e(this).hasClass("text-data")?e(this).text():e(this).val())!==e(this).data("storedState")}})},e.fn.resetState=function(){return e("input:not([type=hidden]), select, textarea, .text-data",this).each(function(t,n){var o;if(!e(n).is(":disabled"))return o=e(n).data("storedState"),"radio"===n.type||"checkbox"===n.type?e(n).prop("checked",o):e(n).hasClass("text-data")?e(n).text(o):e(n).val()!==o?e(n).val(o).change():void 0})}}(jQuery),n=function(e){var t;return t=document.forms[e],$(t).resetState(),this.dataWereChanged=!1,alert(language.Generic.Common.kResetChanges)},e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getListText=t.getListValue=t.getItemValue=t.strCheckIsNull=t.str2lng=t.trimStr=t.str2lngEx=void 0;var o=function(e){var t,n;return n=r(e.value),""!==n?(t=parseInt(n),isNaN(t)||(n=t.toString(),e.value=n),t):(e.value=n,n)};t.str2lngEx=o;var r=function(e){return $.trim(e)};t.trimStr=r;var i=function(e){var t,n;for(e=r(e),t=0;t<e.length&&"0"===e.charAt(t);)t++;for(n=t;n<e.length&&"0"<=e.charAt(n)&&e.charAt(n)<="9";)n++;return t<e.length?n<e.length?Number.NaN:parseInt(e.substring(t,n),10):0};t.str2lng=i;var a=function(e){return void 0===e||null==e?" ":e};t.strCheckIsNull=a;var s=function(e){return null!==e.value?e.value:e.options[e.selectedIndex].value};t.getItemValue=s;var u=function(e){return e.options[e.selectedIndex].value};t.getListValue=u;var l=function(e){return e.options[e.selectedIndex].text};t.getListText=l,function(){var e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};"function"!=typeof String.prototype.escapeHTML&&(String.prototype.escapeHTML=function(){return this.replace(/[<>"'\/]|&(?!nbsp;)/g,function(t){return e[t]})})}(),"function"!=typeof String.prototype.format&&(String.prototype.format=function(){var e=arguments;return this.replace(/{(\d+)}/g,function(t,n){return void 0!==e[n]?e[n]:t})}),"function"!=typeof String.prototype.templateFormat&&(String.prototype.templateFormat=function(e){var t,n,o;o=this;for(t in e)n=e[t],o=o.replace("_"+t+"_",n);return o}),"function"!=typeof String.prototype.normalizeFileName&&(String.prototype.normalizeFileName=function(){var e;return e=this.replace(/["]/g,"'"),e.replace(/[\/:*?<>|+\/]/g,"")}),"function"!=typeof String.prototype.repeat&&(String.prototype.repeat=function(e){var t,n;if(null===this)throw new TypeError("can't convert "+this+" to object");if(n=""+this,e!==e&&(e=0),e<0)throw new RangeError("repeat count must be non-negative");if(Infinity===e)throw new RangeError("repeat count must be less than infinity");if(e=Math.floor(e),0===n.length||0===e)return"";if(n.length*e>=1<<28)throw new RangeError("repeat count must not overflow maximum string size");for(t="";;){if(1==(1&e)&&(t+=n),0===(e>>>=1))break;n+=n}return t})},function(e,t){var n,o,r,i,a,s;o=function(){var e,t;return e={firstYear:parseInt((new Date).getFullYear().toString().substr(-2))+15,nsFormat:"d"+String.fromCharCode(1)+"mm"+String.fromCharCode(1)+"yy"+String.fromCharCode(1)+".",nsFormatTime:"h"+String.fromCharCode(1)+"mm"+String.fromCharCode(1)+":"+String.fromCharCode(1),timezoneStamp:"04:00",dateFormat:{format:"d.mm.yy",delimeter:"."},timeFormat:{format:"h.mm.ss",delimeter:":"}},t=function(t){var n,o;return t?(o=t.split(String.fromCharCode(1)),n=o[3],o.pop(),{format:o.join(n),delimeter:n}):e.dateFormat},function(t){var n,o;return t?(o=t.split(String.fromCharCode(1)),n=o[2],o.pop(),{format:o.join(n),delimeter:n}):e.timeFormat},{init:function(n,o){var r;if(r=-(new Date).getTimezoneOffset()/60,e.timezoneStamp=(r>=10?"":"0")+r+":00",void 0!==n&&(e.nsFormat=n,e.dateFormat=t(n)),void 0!==o)return e.nsFormatTime=o,e.timeFormat=t(o)},str2date:function(t){return r(t,e.nsFormat,String.fromCharCode(1),e.firstYear)},str2dateFormat:function(t,n){return r(t,n,String.fromCharCode(1),e.firstYear)},str2time:function(t){return i(t,e.nsFormatTime)},date2str:function(t){return n(t,e.nsFormat)},date2strfrm:function(e,t){return n(e,t)},time2str:function(t){return s(t,e.nsFormatTime)},time2Str_ss:function(t){return a(t,e.nsFormatTime)},getDateFormat:function(){return e.dateFormat},getLocaleFormat:function(){var t,n;return t=e.dateFormat,n={d:"д",dd:"дд",m:"м",mm:"мм",yy:"гг",yyyy:"гггг"},t.format.split(t.delimeter).map(function(e){return n[e]}).join(t.delimeter)},getTimeFormat:function(){return e.timeFormat},getLocalDateTime:function(t){return new Date(t+"+"+e.timezoneStamp)},getUTCDate:function(e,t,n){return new Date(Date.UTC(e,t,n))},asUTC:function(e){var t;return t=new Date(e.getTime()),t.setHours(e.getHours()-e.getTimezoneOffset()/60),t},castServerDateTimeToClient:function(e){var t,n,o,r;return r=moment(e).toDate(),o=appContext.serverTimeZone,t=(new Date).getTimezoneOffset()/-60,n=t-o,r.setTime(r.getTime()+36e5*n),r},asUTCDate:function(e){var t,n,o,r;return t=new Date(e),r=t.getFullYear(),o=t.getMonth(),n=t.getDate(),new Date(Date.UTC(r,o,n))}}}(),r=function(e,t,n,o){var r,i,a,s,u,l,c;if(a=t.split(n),n=a[3],i=e.split(n),3!==i.length)return null;for(s=u=0;u<=2;s=u+=1)if("m"===a[s]||"mm"===a[s]){if(!i[s])return null;if(l=str2lng(i[s]),isNaN(l)||l<=0||l>12)return null}else if("d"===a[s]||"dd"===a[s]){if(!i[s])return null;if(r=str2lng(i[s]),isNaN(r)||r<=0||r>31)return null}else if("yy"===a[s]||"yyyy"===a[s]){if(!i[s])return null;if(c=str2lng(i[s]),c<100?c=c<o?2e3+c:1900+c:(c>=100&&c<1e3||c>9999)&&(c=NaN),isNaN(c))return null}return r>30&&(4===l||6===l||9===l||11===l)?null:2===l&&r>(c%4==0&&c%100!=0||c%400==0?29:28)?null:new Date(Date.UTC(c,l-1,r))},n=function(e,t){var n,o,r,i,a,s,u,l;for(u="",r=t.split(String.fromCharCode(1)),o=r[3],l=e.getFullYear(),s=e.getMonth()+1,n=e.getDate(),i=a=0;a<=2;i=a+=1)"m"===r[i]?u+=s.toString()+o:"mm"===r[i]?u+=(s<10?"0":"")+s.toString()+o:"d"===r[i]?u+=n.toString()+o:"dd"===r[i]?u+=(n<10?"0":"")+n.toString()+o:"yy"===r[i]?(l%=100,u+=(l<10?"0":"")+l.toString()+o):"yyyy"===r[i]&&(u+=l.toString()+o);return u.slice(0,-1)},s=function(e,t){var n,o,r,i,a,s,u,l,c;for(c="",null===e&&(e=new Date(0,0)),r=t.split(String.fromCharCode(1)),o=r[2],i=e.getHours(),u=e.getMinutes(),l=e.getSeconds(),n=r[3],a=s=0;s<=3;a=s+=1)"h"===r[a].charAt(0)?(""!==n&&(12===i?n=r[4]:i>12?(i-=12,n=r[4]):(i=0)&&(i=12)),"hh"===r[a]?c+=(i<10?"0":"")+i.toString()+o:c+=i.toString()+o):"mm"===r[a]?c+=(u<10?"0":"")+u.toString()+o:"ss"===r[a]&&(c+=(l<10?"0":"")+l.toString()+o);return c.slice(0,-1)},a=function(e,t){var n,o,r,i;return null===e?"00:00:00":(i=s(e,t),o=t.split(String.fromCharCode(1)),n=o[2],r=e.getSeconds(),i+n+(r<10?"0":"")+r.toString())},i=function(e,t){var n,o,r,i,a,s,u,l;if(o=t.split(String.fromCharCode(1)),n=o[2],l=e.split(n),2!==l.length)return null;for(i=a=0;a<=2;i=a+=1)"h"===o[i].charAt(0)?r=parseInt(l[i]):"m"===o[i].charAt(0)?s=parseInt(l[i]):"s"===o[i].charAt(0)&&(u=parseInt(l[i]));return void 0===u&&(u=0),(o[3]=l[4])&&(r+=12),new Date(0,0,0,r,s,u)},function(){$(document).ready(function(){if("undefined"!=typeof appContext)return o.init(appContext.dateFormat,appContext.timeFormat)})}(),e.exports={dateUtils:o,str2datef:r,date2strf:n,timeTwoStrf:s,time2Str_ss_f:a,strTwoTimef:i}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SetSelectedMenu=t.SetSelectedTab=void 0;var o=n(0),r=n(4),i=function(e,t){var n=document.forms.MenuForm;if(n){var i=function(){if(0===t.indexOf("tab:")){var o=t.substring(4);return void(0,r.openTab)(o,"tab_"+e)}if(0===t.indexOf("window:")){var i=t.substring(7),a=66===e?"_staffAttest":e;return void(0,r.openPopupWindow)(a,i,1024,800)}return 56===e?(t=(t.match(/\/$/)?t:t+"/")+"?SchoolYearId="+appContext.yearId+"&UserId="+appContext.userId,void(0,r.openPopupWindow)("_qualityAssessmentAnalytics",t,950,660)):208===e?(t="".concat(t.match(/\/$/)?t:t+"/","?EMId=").concat(appContext.emId,"&UserId=").concat(appContext.userId,"&GlobalYearId=").concat(appContext.globalYearId),void(0,r.openPopupWindow)("_qualityAssessmentAnalyticsEM",t,950,660)):(n.elements.TabItem.value=e,n.action=t,window.isHaveToLogout=!1,void n.submit())};if("function"==typeof window.AngularNavigateHandler)return window.isHaveToLogout=!1,window.AngularNavigateHandler(t).then(i,function(){}),!0;(0,o.checkForChanges)().then(i)}};t.SetSelectedTab=i;var a=function(e,t){var n=document.forms.MenuForm;if(n)return(0,o.checkForChanges)().then(function(){return n.elements.MenuItem.value=e,n.elements.TabItem.value=0,n.action=t,window.isHaveToLogout=!1,n.submit()}),!1};t.SetSelectedMenu=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initButtonLock=t.isButtonsLock=void 0;var o=!1,r=function(){return!!o||(o=!0,setTimeout(function(){o=!1},200),!1)};t.isButtonsLock=r;var i=function(){var e;e=$("button[onclick]"),e.each(function(){var e,t;return e=$(this),t=e.attr("onclick"),e.attr("onclick","if(isButtonsLock()) {return;}"+t)})},a=function(){$("body").on("click","button:not([onclick])",function(){if(!$.data(this,"isDblClickHandled")){var e=$._data(this,"events");if(e){var t=e.click;$.data(this,"lastClicked",(new Date).getTime()),$(this).click(function(e){var t,n;return t=$.data(this,"lastClicked"),n=(new Date).getTime(),t&&n-t<200?e.stopImmediatePropagation():$.data(this,"lastClicked",n)});var n=t.pop();t.splice(0,0,n),$.data(this,"isDblClickHandled",!0)}}})},s=function(){i(),a()};t.initButtonLock=s},function(e,t,n){var o,r,i,a,s,u,l,c,d,f,p,h,m,g,v,w,b,y,C,x,k,S,T,P,E,B,A,I,D,O,j,F,G,H,M,N,W,L,U;window.dataWereChanged=!1,window.bIsDBFree=!0,window.bNewWindow=!1,window.windows={},r=n(2),o=n(0),L=n(3).instance,$(document).ready(function(){return $(".switсh_year").click(function(){return $(".switсh_year").toggleClass("go_left")})}),v=function(){var e,t,n,o,r;for(n=$(window),e=v;e&&!((o=e.arguments[0])instanceof Event||o instanceof $.Event);)o=null,e=e.caller;return o&&(t=o.target||o.srcElement,r=$(t).closest("div.modal.fade"),r.length&&(n=r)),n.prop("dataWereChanged",!0)},l=function(e){var t;if(0===arguments.length&&(e=wasSavedMsg),e&&!(e.length<1)){if("undefined"!=typeof Storage){if(void 0!==sessionStorage.showedWasSaved&&_.contains(sessionStorage.showedWasSaved.split(","),pageVer.toString()))return;void 0===sessionStorage.showedWasSaved&&(sessionStorage.showedWasSaved=""),sessionStorage.showedWasSaved+=pageVer+","}return t={},arguments[1]&&(t=arguments[1]),e.length>500&&(t.width=600),alert(e,t),window.dataWereChanged=!1}},C=function(e){return e||(e=event),e},f=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},k=function(e){return e.which?e.which:e.keyCode},S=function(e){return e.target?e.target:e.srcElement},U=function(e,t){var n,o,r;return o=$.Deferred(),r=o.promise(),r.fail(function(){return $.show.message(language.Generic.Common.kErrMsgNoChecks)}),n=$("input[name='"+t+"']:checkbox:checked",e).length,n>0?o.resolve(n):o.reject(n),r},G=function(e){var t,n;return e=C(e),n=k(e),t=S(e),!!N(e,n,t)&&a(e,n,t)},a=function(e,t,n){return!0},window.Back=null,N=function(e,t,n){return 123===t&&(window.isHaveToLogout=!1),116===t&&document.forms.length>0?(DoSubmit(document.forms[0],"#"),!1):"INPUT"===n.nodeName||"TEXTAREA"===n.nodeName||8!==t||(f(e),window.Back&&window.Back(),!1)},$(document).bind("keydown",G),D=window.alert,b=function(e,t){return alert(t).then(function(){return setTimeout(function(){return e.focus()},100)})},y=function(e,t){return $.show.error(t).then(function(){return setTimeout(function(){return e.focus()},100)})},x=function(e){var t,n,o,r,i;for(t=[],r=0,i=e.length;r<i;r++)o=e[r],n=$(o).serializeArray(),t=_.union(t,n);return t},A=function(e){var t,n,o,i,a,s,u,l,c,d,f,p,h,m,g,v;return o={form:"",action:"",auth:!0,nocache:!1,method:"POST",data:null,queryData:null,forceData:null,dataType:"JSON",headers:null,showProcessing:!1,showSuccessMessage:!1,contentType:"application/x-www-form-urlencoded; charset=UTF-8",streamed:!1,streamReadInterval:200,defaultErrorHandling:!0,onStreamRead:function(e){},onSuccess:function(e){},onError:function(e,t,n){},onComplete:function(e,t,n){},rawSettings:null},l=$.extend({},o,e),c="",!1,l.form&&(g=void 0!==l.form.elements.AT,e.action||(l.action=l.form.action),c+="&"+$(l.form).serialize()),l.auth&&!g&&-1===l.action.indexOf("webapi")&&(c+="&AT="+strATTok),l.nocache&&(c+="&ver="+T()),l.queryData&&(d=$.param(l.queryData),d.length>0&&(-1===l.action.indexOf("?")?l.action+="?"+d:l.action+="&"+d)),l.data&&("application/json"===l.contentType?"object"==typeof l.data&&(c="&"+JSON.stringify(l.data)):"string"==typeof l.data?c+="&"+l.data:L.iterateParams(l.data,function(e,t){c+="&"+encodeURIComponent(e)+"="+encodeURIComponent(t)})),c.length>0&&(c=c.substring(1)),n=$.Deferred(),s=function(e,t,o){var i,a,s,u,c,d;return l.showProcessing&&$(document).trigger("closeProcessing"),l.streamed&&(clearInterval(p),h()),401===e.status?(i=e.getResponseHeader("auth-error"),"SessionExpired"===i?f(null!=(u=language.Generic.Common.kTimeOutOccured4Ajax)?u:language.Generic.Common.kTimeOutSessionWarn).then(function(){return r.postTo({path:"/",method:"GET"})}):f(null!=(c=language.Generic.Common.kErrPageAccess)?c:"Ошибка доступа"),void n.reject()):(l.defaultErrorHandling&&(s=null,a=null,d=null,e.responseJSON&&e.responseJSON.message&&(s=e.responseJSON.message,a=e.responseJSON.details,d=e.responseJSON.stackTrace),e.responseJSON?f(s,a,d,e.responseJSON.isInformation):f(s,a,d)),l.onError(e,t,o),n.reject(e))},i=function(e){e&&e.message?f(e.message,e.details,e.stackTrace):f(),n.reject()},f=function(e,t,n,o){var r,i;return void 0===o&&(o=null),i=e&&"string"==typeof e?e:language.Generic.Common.kUnexpErr,(t||n)&&window.appContext&&"prod"!==window.appContext.environment&&(r="<div class='debug-panel'>",t&&(r+="<p class='title'>Details:</span><div>"+t+"</div>"),n&&(r+="<p class='title'>StackTrace:</span><div class='stack'>"+n+"</div>"),i+=r+"</div>"),o?$.show.message(i):$.show.error(i)},a=function(e,t,o){if(l.showProcessing&&$(document).trigger("closeProcessing"),l.streamed&&(clearInterval(p),h()),l.defaultErrorHandling){if("JSON"!==l.dataType)return l.onSuccess(e),void n.resolve(e);if(void 0===e)204!==o.status&&i();else if(e.isError)return void i(e)}return l.showSuccessMessage&&e.message&&$.show.message(e.message),l.onSuccess(e),n.resolve(e)},t=function(e){if(l.headers)return L.iterateParams(l.headers,function(t,n){return e.setRequestHeader(t,n)})},l.showProcessing&&$(document).trigger("showProcessing"),u={type:l.method,url:l.action,contentType:l.contentType,data:l.forceData?l.forceData:c,dataType:l.dataType,success:a,error:s,complete:l.onComplete,beforeSend:t},l.auth&&"undefined"!=typeof strATTok&&(u.headers={at:strATTok}),l.streamed&&(v=jQuery.ajaxSettings.xhr(),u.xhr=function(){return v},m=0,h=function(){var e,t;try{return e=v.responseText,t=e.substring(m),t&&(m+=t.length,l.onStreamRead(t)),m}catch(e){e}},p=setInterval(h,l.streamReadInterval)),l.rawSettings&&(u=$.extend(u,l.rawSettings)),jQuery.ajax(u),n.promise()},B=function(e,t,n){var o;return o=function(t){return t.message&&alert(t.message),window.dataWereChanged=!1,$(e).rememberState()},t=t||{},A({form:e,action:n||e.action,data:t,showProcessing:!0,onSuccess:o})},T=function(){var e;return e=new Date,e.getTime()},I=function(e,t,n){e.location.href=t+"?"+n+"&ver="+T()},m=function(){var e,t,n,o,r,i;if((n=document.cookie)&&(t=n.split(";"),(e=n.match(/\b(ASPSESSIONID[A-Z]+)(?==)/g))&&e.length>48||t.length>50||n.length>4090))for(o=r=0,i=e.length-1;0<=i?r<=i:r>=i;o=0<=i?++r:--r)document.cookie=e[o]+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;"},H=function(){var e,t,n;e=$("input[type=text]:enabled:visible").not(".date-input,.date input"),n=$(window).height(),e.length>0&&(t=$(e[0]),t.height()+t.offset().top<n&&t.focus())},String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),M=function(e,t,n){var o;return o=new Image,o.src=1===n?e+"_on.gif":e+".gif",document[t].src=o.src},p=function(e,t,n){return!(e.value.length>t)||(alert("Поле '"+n+"' должно содержать не более "+t+" символов"),e.focus(),!1)},s=function(e){if(null!=e)o.checkForChanges().then(function(){return $.show.confirmation(language.Generic.Common.kExitConfirmationQuestion)}).then(function(){return r.postTo("/asp/logout.asp")});else{if(!("undefined"!=typeof appContext&&null!==appContext?appContext.at:void 0))return;window.open(L.makeUrl("/asp/logout.asp"))}},function(){var e;e=!1,$(document).ready(function(){if(m(),!$("body").hasClass("print")&&(null==window.opener||window.opener.closed))return window.onunload=function(t){e||window.haveToLogout&&!window.haveToLogout()||s()},$(window).on("beforeunload",function(){window.haveToLogout&&!window.haveToLogout()||(e=!0,s())})})}(),P=function(e,t){var n,o;return n=function(){if(t)return t()},o=function(t){return t.isError||!t.data?(alert(t.message||language.Generic.Common.kUnexpErr),void n()):t.data.isPosible?void e():(alert(language.Generic.Common.kMaxHeavySessionsReached),void n())},A({action:"/asp/scripts/ajaxmethods.asp",data:{method:"kHeavySessionIsPosible"},showProcessing:!0,defaultErrorHandling:!1,onSuccess:o})},c=function(e,t){return $("#WorkingInSystemCnt").html(t)},u=function(e,t,n,r){A({form:e,action:t,dataType:"html",showProcessing:!0,onSuccess:function(e,t){var i,a,s,u;if(/"isError":true}/i.test(e))return a=$.parseJSON(e),void alert(a.message);s=$(e).filter("script[rel~=onclose]").html(),u=$(e).filter("script[rel~=onload]").html(),i=$.show.dialog({title:$("h1.title",e).text(),size:BootstrapDialog.SIZE_WIDE,onshown:function(t){$(".bootstrap-dialog-message").html(e),$("h1.title",$(".bootstrap-dialog-message")).remove(),r&&r(),$.globalEval(u)},onhide:function(e){return $.globalEval(s),o.setDBFree(),e.$modal.prop("dataWereChanged")&&n&&n(),!0}}),i.showInDialog="SID"},onError:function(e,t,n){return alert(t)}})},g=function(){return $.show.confirmation(language.Generic.Common.kExportIntoExcel,0,null,!1,"ShowExcelConfirm")},O=function(e,t,n){var o,r;return o=function(){var o,r;r=t+"?VER="+T()+"&AT="+strATTok;for(o in n)r+="&"+o+"="+n[o];return DoSubmit(e,r)},r={},r[$.show.defaults.yesText]=o,$.show.confirmation(language.Generic.Common.kExportIntoExcel,0,r,!1,"ShowExcelConfirm")},j=function(e,t,n){var o,r;return o=function(){var o;for(o in n)t+=o+"="+n[o]+"&";return DoSubmit(e,t)},r={},r[$.show.defaults.yesText]=o,$.show.confirmation(language.Generic.Common.kExportIntoExcel,0,r,!1,"ShowExcelConfirm")},i=function(e){var t;return t=$("select[name^=FilterEMID_] option:selected[value!=-1]").last().val(),void 0!==t&&-1!==t||(t=e),t},d=function(e){var t,n,o,r;if(o=navigator.userAgent,!!o.match(/Trident\/7\./)||o.indexOf("MSIE")>0)return r=!0,window.onblur=function(){return r=!1},t=function(){if(!r)return e.focus(),window.onblur=null,clearInterval(window.timer1)},window.timer1=setInterval(t,1e3);setTimeout(function(){$(document).trigger("showProcessing")},500),n=function(){e.closed&&($(document).trigger("closeProcessing"),clearInterval(window.timer1))},window.timer1=setInterval(n,500)},h=function(e,t){var n,o,r,i,a;for(a="",n=!1,o=r=0,i=t.length-1;r<=i;o=r+=1)a=a+", "+t[o],e===t[o]&&(n=!0);return a=a.slice(1),!!n||(alert(language.Generic.SetupSchoolResources.kErrInvalidFileExt+a),!1)},E=function(e){var t,n,o,r;return o=e,t=o.elements.EMAIL,r=t.value,n=/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*\.(\w{2}|(com|net|org|edu|int|mil|gov|arpa|biz|aero|name|coop|info|pro|museum))$/,!!n.test(r)||(t.focus(),alert(language.Generic.SetupSchoolUI.kSetEMail),!1)},W=function(e){var t,n;return t={viewHeader:!0},n=$.extend({},t,e),$(".print-block").printUtils().toPrint(n)},w=function(e){var t,n;return t={viewHeader:!0},n=$.extend({},t,e),$(".print-block").printUtils().toExcel(n)},F=function(e,t,n,o,r){var i,a,s,u,l,c,d;return d=null,i=null,l=new Array,c={replace:function(e,t){return $("table",t).addClass("table table-xs")},getSchoolCard:function(){var e,t,n;return e=$("<div>"),t=$("div.print-block"),n=t.clone(),n.find(".form-group").appendTo(e),e}},u=$.ajax({url:"/vendor/pages/templates/schoolCard/schoolCardTemplate.html",cache:!0,success:function(e){return d=e.replace(/(?:\r\n|\r|\n)/g,"")}}),a=$.ajax({url:"/vendor/pages/templates/schoolCard/formGroupTemlate.html",cache:!0,success:function(e){var t;return t=e.replace(/(?:\r\n|\r|\n)/g,""),Handlebars.registerPartial("formGroup",t)}}),s=A({action:"/webapi/schools/"+e+"/card",showProcessing:!0,method:"GET",onSuccess:function(e){return e.commonInfo.foundingDate&&(e.commonInfo.foundingDate=dateUtils.date2str(new Date(e.commonInfo.foundingDate))),e.commonInfo.locationInfo&&(e.commonInfo.locationInfo.inProvinceCenter=e.commonInfo.locationInfo.inProvinceCenter?language.Generic.Common.kYes:language.Generic.Common.kNo,e.commonInfo.locationInfo.isProvinceSchoolInCity=e.commonInfo.locationInfo.isProvinceSchoolInCity?language.Generic.Common.kYes:language.Generic.Common.kNo),i={schoolCard:e,language:language,isDefaultLangRus:r,functionalities:{isSchool:2===appContext.funcType,isPreSchool:t,isAddSchool:n,isOrphanageSchool:o}}}}),l.push(u),l.push(a),l.push(s),extDeferred.when(l).then(function(){var e,t,n;return n=Handlebars.compile(d),e=n(i),t=function(){var t;return t={viewHeader:!0,processingFunc:[c.replace],header:language.Generic.SchoolInfo.kTitleSchoolInfoCard,titleWindow:"<%=NETSCHOOL_PRODUCT_NAME%>. "+language.Generic.SchoolInfo.kTitleSchoolInfoCard,showFilters:!1},e=e.split("background-color: RGB( 238, 238, 238);").join("padding:0;"),$(e).printUtils().toPrint(t)},$.show.dialog({size:BootstrapDialog.SIZE_WIDE,title:language.Generic.SchoolInfo.kTitleSchoolInfoCard,message:e,buttons:[{label:language.Generic.Buttons.kPrint,action:t,cssClass:"btn-primary"}]})})},e.exports={GetLocalEmId:i,KeyDown:a,Logout:s,ShowInDialog:u,WasSaved:l,WorkInSystemUpdater:c,blockMainWindow:d,cancel_event:f,checkAreaLength:p,checkFileExtension:h,clearASPSESSIONID:m,confirmExcel:g,dataChanged:v,exportToExcel:w,focusAlert:b,focusError:y,getEvent:C,getFormsParams:x,getKeyCode:k,getTargetElement:S,getVer:T,heavyAction:P,isEMailValid:E,jsSaveForm:B,jsSubmit:A,jumpVer:I,lalert:D,openExcelCommon:O,openExcelVersn:j,openSchoolInfo:F,processKeyDown:G,setFocus:H,setImgState:M,shouldProcessKey:N,showPrintVersion:W,whenChecked:U,urlHelper:L}},function(e,t){!function(e){var t,n,o,r,i;n=function(e){var t,n,o;if(e.length)return e;o=[];for(n in e)t=e[n],o.push({label:n,action:t});return o},r=function(t,n){var o,r,i,a;for(r=i=0,a=t.length;i<a;r=++i)if(o=t[r],o.label===n.label)return void(t[r]=e.extend(n,o));return t.push(n)},o=function(t){var n;return t?(n=e.extend({},t),n.onhide=t.close,n):{}},t=[],i={},e.show={defaults:{okText:language.Generic.Common.kOk,errorTitle:language.Generic.Common.kErrorMsgEmotional,messageTitle:language.Generic.Announcement.kDescription,confirmationTitle:language.Generic.Common.kAttention,yesText:language.Generic.Common.kYes,noText:language.Generic.Common.kNo,processingTitle:language.Generic.Common.kWait,processingText:language.Generic.Common.kProcessing,loadingText:language.Generic.Common.kLoad,selfErrorText:language.Generic.Common.kPageErrWrongCall,noAskText:language.Generic.Common.kNoAsk,checkBoxId:"MyCheckBox",cancelText:language.Generic.Buttons.kCancel},message:function(t,n,r){var a,s,u,l,c;return void 0===t?void e.show.error(i.selfErrorText+' "$.show.message"'):(s=e.Deferred(),a={title:"string"==typeof n?n:i.messageTitle,message:t,type:BootstrapDialog.TYPE_INFO,buttons:[{label:i.okText,hotkey:13,icon:"glyphicon glyphicon-ok-sign",action:function(e){return e.close()}}]},c=e.extend({},a,o(r)),c.onhide?(u=c.onhide,c.onhide=function(e){return u(e),s.resolve(e)}):c.onhide=function(e){return s.resolve(e)},l=BootstrapDialog.show(c),l.getModal().on("keyup",function(e){if(32===e.which)return l.close()}),l.isMessage=!0,s.promise())},dialog:function(t){var n,o,r,i,a,s,u,l,c,d;if((null!=(l=t.message)?l.jquery:void 0)&&"script"===t.message.prop("tagName").toLowerCase()&&(t.message=t.message.html().replace(/(?:\r\n|\r|\n)/g,"")),t.draggable=!0,d=function(e,t,n){if(e.icon||(e.icon=t),!e.cssClass)return e.cssClass=n},t.buttons){for(r=!1,c=t.buttons,s=0,u=c.length;s<u;s++){switch(n=c[s],n.label){case language.Generic.Common.kOk:case language.Generic.Common.kYes:d(n,"glyphicon glyphicon-ok-sign","btn-primary");break;case language.Generic.Common.kNo:d(n,"glyphicon glyphicon-remove-sign","btn-default");break;case language.Generic.Buttons.kAdd:d(n,"glyphicon glyphicon-plus-sign","btn-primary");break;case language.Generic.Buttons.kCreate:d(n,"glyphicon glyphicon-file","btn-primary");break;case language.Generic.Buttons.kApply:d(n,"glyphicon glyphicon-ok-sign","btn-primary");break;case language.Generic.Buttons.kSave:d(n,"glyphicon glyphicon-floppy-save","btn-primary");break;case language.Generic.Buttons.kEdit:d(n,"glyphicon glyphicon-pencil","btn-primary");break;case language.Generic.Buttons.kRemove:d(n,"glyphicon glyphicon-minus-sign","btn-danger");break;case language.Generic.Buttons.kContinue:d(n,"glyphicon glyphicon-new-window","btn-primary");break;case language.Generic.Buttons.kRefresh:d(n,"glyphicon glyphicon-refresh","btn-default");break;case language.Generic.Calendar.kClose:r=!0,d(n,"glyphicon glyphicon-remove","btn-default");break;case language.Generic.Buttons.kCancel:r=!0,d(n,"glyphicon glyphicon-ban-circle","btn-default")}n.action=_.debounce(n.action,500,!0)}r||t.withoutCancelButton||(t.closeByKeyboard=!1,t.buttons.push({hotkey:27,label:language.Generic.Buttons.kCancel,action:function(t){return e(document.activeElement).blur(),t.close()},icon:"glyphicon glyphicon-ban-circle",cssClass:"btn-default"}))}return a=t.onshown,t.onshown=function(t){if(e("input:visible, select:visible",t.$modalContent).first().focus(),a)return a(t)},i=t.onhide,t.onhide=function(t){return!!t.$modal.prop("forceClose")||(t.$modal.prop("dataWereChanged")?(e.show.confirmation(language.Generic.Common.kDataWereChanged).then(function(){return i&&!i(t)||t.forceClose(),t.$modal.prop("dataWereChanged",!1)}),!1):!i||i(t))},o=new BootstrapDialog(t),o=e.extend(o,{forceClose:function(){return o.$modal.prop("forceClose",!0),o.close()},successClose:function(){return o.$modal.prop("dataWereChanged",!1),o.forceClose()}}),e(document).trigger("dialog-opened"),t.deferredOpen||o.open(),o},confirmation:function(t,o,a,s,u){var l,c,d,f,p,h,m,g,v,w,b,y,C,x;if(void 0===t)return void e.show.error(i.selfErrorText+' "$.show.confirmation" (p1)');for(h=[{label:i.yesText,cssClass:"btn-primary",icon:"glyphicon glyphicon-ok-sign",hotkey:13,action:function(){}},{label:i.noText,icon:"glyphicon glyphicon-remove-sign",action:function(){}}],a||(a=[]),d=n(a),g=0,b=h.length;g<b;g++)p=h[g],r(d,p);if(m=e.Deferred(),void 0!==u){for(v=0,y=d.length;v<y;v++)l=d[v],l.label===i.yesText&&(c=l.action);if("1"===e.cookie(u))return c(),m.resolve(i.yesText),m.promise();d.unshift({label:i.yesText+", "+i.noAskText,action:function(){return e.cookie(u,1,{expires:30,path:"/"}),c()}})}for(w=0,C=d.length;w<C;w++){if(l=d[w],"function"!=typeof l.action)return void e.show.error(i.selfErrorText+' "$.show.confirmation" '+l.label);l.action=function(){var e;return e={action:l.action,label:l.label},function(t){return t.close(),e.action(),e.label===i.noText?m.reject(e.label):m.resolve(e.label)}}()}return x=t.replace(/\\n/g,"\n"),f={title:"string"==typeof o?o:i.confirmationTitle,message:x,type:BootstrapDialog.TYPE_PRIMARY,buttons:d},void 0!==s&&s&&(f.closable=!1),BootstrapDialog.show(f),m.promise()},getConfirmation:function(t,n,o,r,i){return function(){return e.show.confirmation(t,n,o,r,i)}},prompt:function(t,n,o){var r,a,s,u,l;return void 0===t?void e.show.error(i.selfErrorText+' "$.show.message"'):(a=t+': <input type="text" class="form-control">',s=e.Deferred(),u=function(t){return e("input",t.getModalContent()).val()},r=function(e){var t;return t=u(e),!o||o(t)},l={title:"string"==typeof n?n:i.messageTitle,message:a,closable:!0,type:BootstrapDialog.TYPE_INFO,buttons:[{label:i.okText,hotkey:13,action:function(e){var t;return!!r(e)&&(t=u(e),e.close(),s.resolve(t))}},{label:i.cancelText,action:function(e){return u(e),e.close(),s.reject}}]},BootstrapDialog.show(l),s.promise())},fileDialog:function(t){var n,o,r,i,a,s,u,l;return u=e.Deferred(),o=function(e,t,n){var o;return o=document.createElement("input"),o.setAttribute("type","hidden"),o.setAttribute("name",t),o.setAttribute("value",n),e.appendChild(o)},n=function(){var n,o,r,i,a,s,u,l,c,d;if(!(i=e("#fileName").val()))return alert(language.Generic.SetupSchoolUI.kMsgSelectFileName),!1;if(t.fileExts){for(n=i.split("\\"),r=n[n.length-1],c=r.toLowerCase(),s=!1,d=t.fileExts,a=0,l=d.length;a<l;a++)o=d[a],u=o.length,c.substr(c.length-u,u)===o&&(s=!0);if(!s)return alert(t.invalidFileExtMsg?t.invalidFileExtMsg:language.Generic.Curriculum.kInvalidImportFileFormat),!1}return!t.customCheck||t.customCheck()},r=null,a=function(e){return e.close()},i=function(i){return extDeferred.when(n).then(function(){var n,a,s,u;if(t.preSubmit&&t.preSubmit(),t.isAjax)r.submit(),e(document).trigger("showProcessing");else{if(n=document.forms.selectFile,t.target?(n.target=t.target,s={url:"/asp/blank.htm",name:t.target,specs:"status=no,toolbar=no,menubar=no,location=no,scrollbars=yes,resizable=yes,directories=no, width=1200px, height=500px"},windowOpen(s),u=s.winChild):e(document).trigger("showProcessing"),t.handlerApplyBtn&&t.handlerApplyBtn(u),o(n,"VER",getVer()),o(n,"AT",strATTok),t.submitParams)for(a in t.submitParams)o(n,a,t.submitParams[a]);t.isHeavyAction?heavyAction(function(){return DoSubmit(n,t.url)},function(){return u.close()}):DoSubmit(n,t.url),i.close()}})},s='{0} <form name="selectFile" method="post" enctype="multipart/form-data"> {2} <div class="form-group"> <div class="input-group"> <span class="btn btn-primary btn-file input-group-addon">'+language.Generic.Common.kSelectFile+'<input type="file" name="file" id="fileupload"> </span> <input type="text" class="form-control" disabled id="fileName"> </div> </div> {1} <div class="alert alert-info" role="alert" style="display: none;" id="explanation"></div> </form>',s=s.replace("{0}",void 0!==t.contentHtml?t.contentHtml:""),s=s.replace("{1}",void 0!==t.additionalContent?t.additionalContent:""),s=s.replace("{2}",void 0!==t.formAppendContent?t.formAppendContent:""),e.show.dialog({title:t.title,message:s,onshown:function(n){var o,i;if(e('input[name="file"]').on("change",function(){var n,o;if(n=this.value.split("\\"),o=n[n.length-1],e(this).parent().parent().find("#fileName").val(o).attr("title",o),t.maxFileSize&&this.files&&this.files[0]&&this.files[0].size>1024*t.maxFileSize)return alert(language.Generic.SetupSchoolPortfolio.kFileSizeCantBeGreaterThan+t.maxFileSize+" KB")}),t.content&&(e("#explanation").show(),e("#explanation").text(t.content)),t.onShownDlg&&t.onShownDlg(),t.isAjax)return e("#fileupload").bind("fileuploadsubmit",function(n,o){var r,i,a,s,u,l;for(r={fileName:e("#fileName").val()},e('input[name="Separator"]').length&&(r.Separator=e('input[name="Separator"]').val()),u=e("form[name=selectFile]").find("input,select").serializeArray(),a=0,s=u.length;a<s;a++)i=u[a],(null!=(l=t.submitParams)?l[i.name]:void 0)||(r[i.name]=i.value);o.formData=e.extend({},r,t.submitParams)}),o=e.extend({},{_AJAXCALL_:1},t.queryStringParams),i=urlHelper.makeUrl(t.url,o),e("#fileupload").fileupload({url:i,dataType:"json",add:function(e,t){return r=t},done:function(o,r){return e(document).trigger("closeProcessing"),r.result?r.result.isError?e.show.error(r.result.message):(t.handlerAjaxSuccess&&t.handlerAjaxSuccess(r.result),n.close(),u.resolve(r.result)):e.show.error(language.Generic.Common.kUnexpErr)},fail:function(t,n){var o,r,i;return e(document).trigger("closeProcessing"),401===n.jqXHR.status?(o=n.jqXHR.getResponseHeader("auth-error"),void("SessionExpired"===o?e.show.error(null!=(r=language.Generic.Common.kTimeOutOccured4Ajax)?r:language.Generic.Common.kTimeOutSessionWarn):e.show.error(null!=(i=language.Generic.Common.kErrPageAccess)?i:language.Generic.Login.kErrAccessDenied))):n.jqXHR.responseJSON.isError||n.jqXHR.responseJSON.message?e.show.error(n.jqXHR.responseJSON.message):void 0}})},buttons:[{label:null!=(l=t.applyBtnText)?l:language.Generic.Common.kOk,action:i},{label:language.Generic.Buttons.kCancel,action:a}]}),u.promise()},alert:function(n,o){var r,i,a;return i=!1,e.each(BootstrapDialog.dialogs,function(e,t){if(!t.closing&&t.isMessage)return i=!0}),i?void t.push(arguments):(a=null,document.activeElement&&("INPUT"!==(r=document.activeElement.tagName.toUpperCase())&&"SELECT"!==r||(a=document.activeElement)),e.show.message(n,language.Generic.Common.kAttention,o).then(function(n){if(n.closing=!0,a&&setTimeout(function(){return a.focus()},200),t.length>0)return e.show.alert.apply(this,t[0]),t.shift()}))},longWork:function(t,n,o,r){var a,s,u,l,c,d;return o=o||{},void 0===t?void e.show.error(i.selfErrorText+' "$.show.longWork"'):(void 0===n&&(n=language.Generic.Curriculum.kPleaseWait),a=e("<div><div class='progress'><div class='progress-bar progress-bar-striped active' role='progressbar' style='width: 1%'></div></div></div>"),a.prepend("<span class='dialog-message'>"+t+"</span>"),o.content&&a.append(o.content),l=e(".progress-bar",a),r||(r=function(){var e,t;return e=l.width()/l.parent().width()*100,t=100*s(e/100)*2,e+=t}),c=function(){var e;return e=r(),l.css("width",e+"%")},d=null,setTimeout(function(){return d=setInterval(c,100)},200),s=function(e){var t;return e>=1?(clearInterval(d),0):(t=0,e>=0&&e<.25?t=(3*Math.random()+3)/100:e>=.25&&e<.65?t=3*Math.random()/100:e>=.65&&e<.9?t=Math.random()/100:e>=.9&&e<.99?t=.001:(clearInterval(d),t=0),t)},u=e.extend({},{message:a,title:n,closable:!1,closeByBackdrop:!1,closeByKeyboard:!1},o),u.onshow=function(t){if(e("body").css("cursor","wait"),o.onshow)return o.onshow(t)},u.onhide=function(t){if(clearInterval(d),e("body").css("cursor",""),o.onhide)return o.onhide(t)},BootstrapDialog.show(u))},error:function(t,n){return e.show.message(t,n||i.errorTitle,{type:BootstrapDialog.TYPE_DANGER})},success:function(t,n){return e.show.message(t,n||i.messageTitle,{type:BootstrapDialog.TYPE_SUCCESS})},processing:function(t,n){return e.show.processing.current=e.show.longWork(null!=t?t:i.processingText,'<span class="glyphicon glyphicon-time"></span> '+(n||i.processingTitle))},loading:function(){return e.show.loading.current=e.show.longWork(i.loadingText,i.loadingText)},modelDialog:function(t){var n,o,r,i,a,s,u;return a=function(){},o=function(){},n=function(e){return e.close(),o(e)},i=function(e){return a(e)},u=Handlebars.compile(t.template),r=u(t.model),t.message=r,t.buttons=[{label:language.Generic.Buttons.kSave,action:i},{label:language.Generic.Buttons.kCancel,action:n}],s={then:function(e,t){a=e,t&&(o=t)},done:function(e){a=e},fail:function(e){o=e}},e.show.dialog(t),s}},i=e.extend({},e.show.defaults),window.alert=e.show.alert,e(function(){var t;return t=e(document),t.bind("showError",function(t,n){return e.show.error(n.message,n.onClose)}),t.bind("showMessage",function(t,n){return e.show.message(n.message,n.title)}),t.bind("showConfirmation",function(t,n){return e.show.confirmation(n.message,n.title,n.yesFunc,n.noFunc)}),t.bind("showProcessing",function(t,n){if(!e.show.processing.current)return e.show.processing()}),t.bind("closeProcessing",function(t,n){if(e.show.processing.current)return e.show.processing.current.close(),e.show.processing.current=null}),t.bind("showLoading",function(t,n){return e.show.loading()}),t.bind("closeLoading",function(t,n){if(e.show.processing.current)return e.show.loading.current.close()})})}(jQuery)},function(e,t,n){"use strict";!function(){$(document).ready(function(){var e=($(window),$(".form-edit"));if(1===e.length){var t=$(".buttons-panel"),n=e.find(".form-group:first");if(!(n.closest(".panel-body").length>0)){var o=n.clone();return o.find("label.control-label").empty().addClass("hidden-sm").addClass("hidden-xs"),t.detach(),o.find("div:first").empty().append(t),o.insertBefore(n)}}})}()},function(e,t,n){"use strict";function o(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=r(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,i=function(){};return{s:i,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw a}}}}function r(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function u(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}Object.defineProperty(t,"__esModule",{value:!0}),t.ButtonsPanelCtrl=void 0;var l=function(){function e(){a(this,e),this.buttonsPanelTopOffset=void 0,this.fixedButtonsPanel=void 0,this.fixedExtraButtons=void 0,this.rightButtonsCnt=void 0,this.actionsWidth=void 0,this.minScreenWidth=void 0,this.observers=void 0,this.fixRightMargin=void 0,this.wnd=void 0,$(".buttons-panel-fixed").remove(),this.wnd=$(window),this.buttonsPanelCust=null,this.buttonsPanelTopOffset=0,this.fixRightMargin=17,this.fixedButtonsPanel=null,this.fixedExtraButtons=null,this.rightButtonsCnt=0,this.actionsWidth=0,this.minScreenWidth=600,this.observers=[]}return u(e,[{key:"init",value:function(){var e=this;if(this.buttonsPanelCust=$(".buttons-panel").filter(":not(.no-actions)"),this.buttonsPanelCust.length>1&&(this.buttonsPanelCust=this.buttonsPanelCust.filter(":visible"),this.buttonsPanelCust.length?this.buttonsPanelCust=this.buttonsPanelCust.first():this.buttonsPanelCust=$(".buttons-panel").first()),this.buttonsPanelTopOffset=this.buttonsPanelCust.length?this.buttonsPanelCust.offset().top:0,this.addActionsButtons(this.buttonsPanelCust),this.buttonsPanelCust){var t=null,n=function(){if(0!==$("body").scrollTop())return $(".buttons-panel-adaptive").removeClass("open");e.fixedButtonPanelHandler()};return this.wnd.scroll(function(){return t&&window.clearTimeout(t),t=window.setTimeout(n,50)}),this.wnd.resize(function(){if(e.wnd.scrollTop()>e.buttonsPanelTopOffset)return e.adaptiveButtonPanelHandler(e.fixedButtonsPanel);e.adaptiveButtonPanelHandler(e.buttonsPanelCust)}),$(document).bind("pageReady",function(){e.adaptiveButtonPanelHandler(e.buttonsPanelCust),e.actionsWidth=e.buttonsPanelCust.find(".buttons-panel-adaptive").outerWidth()}),this.adaptiveButtonPanelHandler(this.buttonsPanelCust)}}},{key:"cloneButtonsPanel",value:function(){var e=this;this.buttonsPanelCust.is(":visible")||this.init(),this.fixedButtonsPanel=this.buttonsPanelCust.clone(),this.fixedButtonsPanel.find("button").each(function(){$(this).closest(".buttons-panel-left").length||$(this).closest(".buttons-panel-right").length||$(this).remove()}),this.fixedButtonsPanel.hasClass("buttons-panel")||(this.fixedButtonsPanel.wrap('<div class="buttons-panel"></div>'),this.fixedButtonsPanel=this.fixedButtonsPanel.parent(".buttons-panel"));var t=$(".buttons-panel.extra");if(t.length&&!this.fixedButtonsPanel.hasClass("extra")){var n=this.fixedButtonsPanel.find(".buttons-panel-left"),r=t.find(".buttons-panel-left");n.length?r.find("button").each(function(){return n.append($(this).clone())}):this.fixedButtonsPanel.prepend(r.clone())}var i=this.fixedButtonsPanel.find("button[ng-click]");if(i.length){var a={attributes:!0},s=function(n,o){var r=e.buttonsPanelCust;t&&(r=r.add(t));var i=r.find(n+"[ng-click='"+o.attr("ng-click")+"']");if(i.length>1&&(i=r.find(n+"[title='"+o.attr("title")+"']")),0!==i.length){var s=new MutationObserver(function(){return o.prop("disabled",i.prop("disabled"))});return e.observers.push(s),s.observe(i[0],a),o.click(function(){return i.click()})}};i.each(function(){s("button",$(this))});this.fixedButtonsPanel.find(".btn-group > .dropdown-menu a").each(function(){s(".btn-group > .dropdown-menu a",$(this))});var u=function(t){var n=$(t),o="button[ng-click='"+n.attr("ng-click")+"']";e.fixedButtonsPanel.find(o).remove()},l=_.debounce(function(){console.log("initing buttons"),e.fixedButtonsPanel.remove(),e.fixedButtonsPanel=null,e.disposeObservers(),e.cloneButtonsPanel()},200);!function(t){var n=new MutationObserver(function(e){var t,n=o(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.addedNodes.length)return void l();var i,a=o(r.removedNodes);try{for(a.s();!(i=a.n()).done;){var s=i.value;"BUTTON"==s.nodeName?u(s):$("button",s).each(function(e,t){return u(t)})}}catch(e){a.e(e)}finally{a.f()}}}catch(e){n.e(e)}finally{n.f()}});n.observe(t,{childList:!0,subtree:!0}),e.observers.push(n)}(this.buttonsPanelCust[0])}var c=$.uicontrols.button({icon:"circle-arrow-up",label:language.Generic.Buttons.kToUp,click:function(){return $("html, body").animate({scrollTop:0},600)}}),d=$("<div class='buttons-up'></div>").append(c);return this.fixedButtonsPanel.prepend(d),this.fixedButtonsPanel.addClass("buttons-panel-fixed").appendTo("body"),this.fixedButtonsPanel}},{key:"addActionsButtons",value:function(e){var t=e.find(".buttons-panel-right").filter(":not(.no-actions)");t.addClass("dropdown-menu  buttons-panel-adaptive-wrapper  pull-right").attr("role","menu");var n=t.find("button");if(this.rightButtonsCnt=n.length,0!=t.length){var o=$("<div></div>").addClass("buttons-panel-adaptive buttons-text").addClass("btn-group");$('<button type="button" />').addClass("btn").addClass("dropdown-toggle").attr("data-toggle","dropdown").attr("aria-expanded","false").append('<span class="glyphicon glyphicon-menu-hamburger" />').append(' <span id="action">Действия</span> ').append('<span class="caret" />').appendTo(o),t.appendTo(o),o.appendTo(e)}}},{key:"getMinWidth",value:function(){var e=window.innerWidth-document.documentElement.clientWidth;return this.minScreenWidth-e}},{key:"adaptiveButtonPanelHandler",value:function(e){if(0===this.rightButtonsCnt)return void $(".buttons-panel-adaptive").css({display:"none"});if(this.wnd.outerWidth()<700)return void $(".buttons-panel-fixed").css({display:"none"});var t=e.find(".buttons-panel-left");0==t.length&&(t=$(".buttons-panel.extra").find(".buttons-panel-left"));var n=e.find(".buttons-panel-right"),o=e.find(".buttons-panel-adaptive");if(0==o.length&&(o=e),0!==this.actionsWidth||(this.actionsWidth=o.outerWidth(),0!==this.actionsWidth)){var r=e.find(".buttons-up"),i=e.outerWidth(),a=t.outerWidth(),s=n.outerWidth(),u=o.find("#action"),l=u.closest(".dropdown-toggle"),c=l.clone();c.css({display:"block",position:"absolute",height:0,top:0,left:"-10000px"});var d=c.find("#action").css({display:"inline"});c.appendTo("body");var f=d.outerWidth();c.remove();var p=a+s;r.length&&(p+=r.outerWidth());var h=r.outerWidth(),m=0,g=t.children('[class ^= "btn"]');0!==t.length&&g.each(function(e){h+=$(this).outerWidth()+parseInt($(this).css("margin-right"))});var v=o.clone();v.css({position:"absolute",height:0,top:0,left:"-10000px"}),v.find(".buttons-panel-adaptive-wrapper").css({display:"block"});var w=v.find(".buttons-panel-adaptive-wrapper").children('[class ^= "btn"]');v.appendTo("body"),w.each(function(e){m+=$(this).outerWidth()}),v.remove();var b=e.width();p>=i?(null!==a&&(a+this.actionsWidth>=i?u.hide():u.show(),0==$(".buttons-panel-fixed").length?$(window).width()-this.fixRightMargin>h+m-f?u.show():u.hide():b>h+m-f?u.show():u.hide()),o.show()):b<=h+m?(o.removeClass("buttons-text"),b>h+m-f?u.show():u.hide()):o.addClass("buttons-text");return o.has("li").length?void 0:o}}},{key:"disposeObservers",value:function(){for(var e in this.observers){this.observers[e].disconnect()}}},{key:"fixedButtonPanelHandler",value:function(){var e=this.getMinWidth();if(0===this.buttonsPanelTopOffset&&(this.buttonsPanelTopOffset=this.buttonsPanelCust.length?this.buttonsPanelCust.offset().top:0),this.wnd.scrollTop()>this.buttonsPanelTopOffset){if(this.wnd.width()<=e)return;if(this.fixedButtonsPanel)return;if(null!=this.fixedExtraButtons?this.fixedExtraButtons.length:void 0){var t=this.fixedButtonsPanel.find(".buttons-panel-left");t.length||(t=$("<div></div>").addClass("buttons-panel-left").insertAfter(this.fixedButtonsPanel.find(".buttons-up")));for(var n in this.fixedExtraButtons){var o=this.fixedExtraButtons[n];t.append($.uicontrols.button(o))}}return this.cloneButtonsPanel(),this.adaptiveButtonPanelHandler(this.fixedButtonsPanel),this.fixedButtonsPanel}if(this.wnd.scrollTop()<=this.buttonsPanelTopOffset){if(!this.fixedButtonsPanel)return;var r=this;return this.fixedButtonsPanel.fadeOut("700",function(){return r.fixedButtonsPanel=null,r.disposeObservers(),$(this).remove()})}}},{key:"addFixedExtraButtons",value:function(e){return this.fixedExtraButtons=e}}]),e}();t.ButtonsPanelCtrl=l,$(document).ready(function(){window.setTimeout(function(){var e=new l;window.buttonsPanelCtrl=e,e.init()},50)})},function(e,t,n){"use strict";jQuery.cookie=function(e,t,n){if(void 0===t){var o=null;if(document.cookie&&""!=document.cookie)for(var r=document.cookie.split(";"),i=0;i<r.length;i++){var a=jQuery.trim(r[i]);if(a.substring(0,e.length+1)==e+"="){o=decodeURIComponent(a.substring(e.length+1));break}}return o}n=n||{},null===t&&(t="",n.expires=-1);var s="";if(n.expires&&("number"==typeof n.expires||n.expires.toUTCString)){var u;"number"==typeof n.expires?(u=new Date,u.setTime(u.getTime()+24*n.expires*60*60*1e3)):u=n.expires,s="; expires="+u.toUTCString()}var l=n.path?"; path="+n.path:"",c=n.domain?"; domain="+n.domain:"",d=n.secure?"; secure":"";document.cookie=[e,"=",encodeURIComponent(t),s,l,c,d].join("")}},function(e,t,n){"use strict";/**
 * @preserve 
 * bootpag - jQuery plugin for dynamic pagination
 *
 * Copyright (c) 2013 botmonster@7items.com
 *
 * Licensed under the MIT license:
 *   http://www.opensource.org/licenses/mit-license.php
 *
 * Project home:
 *   http://botmonster.com/jquery-bootpag/
 *
 * Version:  1.0.5
 *
 */
!function(e,t){e.fn.bootpag=function(t){function n(t,n){var a,s=0==i.maxVisible?1:i.maxVisible,u=1==i.maxVisible?0:1,l=Math.floor((n-1)/s)*s,c=t.find("li");i.page=n=n<0?0:n>i.total?i.total:n,c.removeClass("disabled"),a=n-1<1?1:i.leaps&&n-1>=i.maxVisible?Math.floor((n-1)/s)*s:n-1,c.first().toggleClass("disabled",1===n).attr("data-lp",a).find("a").attr("href",o(a));var u=1==i.maxVisible?0:1;a=n+1>i.total?i.total:i.leaps&&n+1<i.total-i.maxVisible?l+i.maxVisible+u:n+1,c.last().toggleClass("disabled",n===i.total).attr("data-lp",a).find("a").attr("href",o(a));var d=c.filter("[data-lp="+n+"]");if(!d.not(".next,.prev").length){var f=n<=l?-i.maxVisible:0;c.not(".next,.prev").each(function(t){a=t+1+l+f,e(this).attr("data-lp",a).toggle(a<=i.total).find("a").html(a).attr("href",o(a))}),d=c.filter("[data-lp="+n+"]")}d.addClass("disabled"),r.data("settings",i)}function o(e){return i.href.replace(i.hrefVariable,e)}var r=this,i=e.extend({total:0,page:1,maxVisible:null,leaps:!0,href:"javascript:void(0);",hrefVariable:"{{number}}",next:"&raquo;",prev:"&laquo;"},r.data("settings")||{},t||{});return i.total<=0?this:(e.isNumeric(i.maxVisible)||i.maxVisible||(i.maxVisible=i.total),r.data("settings",i),this.each(function(){var t,a,s=e(this),u=['<ul class="pagination bootpag">'];i.prev&&u.push('<li data-lp="1" class="prev"><a href="'+o(1)+'">'+i.prev+"</a></li>");for(var l=1;l<=Math.min(i.total,i.maxVisible);l++)u.push('<li data-lp="'+l+'"><a href="'+o(l)+'">'+l+"</a></li>");i.next&&(a=i.leaps&&i.total>i.maxVisible?Math.min(i.maxVisible+1,i.total):2,u.push('<li data-lp="'+a+'" class="next"><a href="'+o(a)+'">'+i.next+"</a></li>")),u.push("</ul>"),s.find("ul.bootpag").remove(),s.append(u.join("")),t=s.find("ul.bootpag"),s.find("li").click(function(){var o=e(this);if(!o.hasClass("disabled")){var i=parseInt(o.attr("data-lp"),10);n(t,i),r.trigger("page",i)}}),n(t,i.page)}))}}(jQuery,window)}]);